<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hackathon Manager</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #fce4ec 0%, #e1bee7 50%, #bbdefb 100%);
            min-height: 100vh;
            padding: 20px;
            transition: background 0.3s;
        }
        body.dark { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { margin-bottom: 30px; }
        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #9c27b0, #2196f3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            font-weight: 700;
        }
        body.dark .header h1 { background: linear-gradient(135deg, #ce93d8, #64b5f6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .header p { color: #666; font-size: 1rem; }
        body.dark .header p { color: #aaa; }
        .controls { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 25px; }
        .btn-primary {
            display: flex; align-items: center; gap: 8px; padding: 12px 24px;
            background: linear-gradient(135deg, #9c27b0, #2196f3);
            color: white; border: none; border-radius: 50px; font-size: 0.95rem;
            font-weight: 600; cursor: pointer; transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(156, 39, 176, 0.4); }
        .filter-group, .sort-group {
            display: flex; align-items: center; gap: 10px; background: white;
            padding: 10px 20px; border-radius: 50px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        body.dark .filter-group, body.dark .sort-group { background: #2d2d44; }
        .filter-group select { border: none; background: transparent; outline: none; font-size: 0.95rem; cursor: pointer; color: #333; }
        body.dark .filter-group select { color: #e0e0e0; }
        .sort-group span { font-size: 0.9rem; color: #666; }
        body.dark .sort-group span { color: #aaa; }
        .sort-btn {
            padding: 8px 16px; border: none; background: transparent; border-radius: 50px;
            font-size: 0.9rem; cursor: pointer; transition: all 0.2s; color: #666;
        }
        .sort-btn.active { background: #e1bee7; color: #7b1fa2; }
        body.dark .sort-btn { color: #aaa; }
        body.dark .sort-btn.active { background: rgba(156, 39, 176, 0.3); color: #ce93d8; }
        .hackathons-grid { display: grid; gap: 20px; }
        .empty-state {
            text-align: center; padding: 80px 20px;
            background: rgba(255,255,255,0.5); border-radius: 30px; backdrop-filter: blur(10px);
        }
        body.dark .empty-state { background: rgba(45, 45, 68, 0.5); }
        .empty-state p { font-size: 1.2rem; color: #999; }
        .hackathon-card {
            background: white; border-radius: 30px; padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1); transition: all 0.3s;
            border: 1px solid rgba(0,0,0,0.05);
        }
        body.dark .hackathon-card { background: #2d2d44; border-color: rgba(255,255,255,0.05); }
        .hackathon-card:hover { box-shadow: 0 8px 30px rgba(0,0,0,0.15); transform: translateY(-2px); }
        .card-content { display: flex; justify-content: space-between; gap: 20px; }
        .card-main { flex: 1; }
        .card-header { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 15px; flex-wrap: wrap; }
        .card-header h3 { font-size: 1.3rem; color: #333; font-weight: 600; }
        body.dark .card-header h3 { color: #e0e0e0; }
        .badge { padding: 6px 14px; border-radius: 50px; font-size: 0.75rem; font-weight: 600; }
        .status-upcoming { background: #bbdefb; color: #1565c0; }
        .status-registered { background: #e1bee7; color: #6a1b9a; }
        .status-submitted { background: #ffe082; color: #f57c00; }
        .status-won { background: #c8e6c9; color: #2e7d32; }
        .status-rejected { background: #e0e0e0; color: #616161; }
        body.dark .status-upcoming { background: rgba(33, 150, 243, 0.3); color: #90caf9; }
        body.dark .status-registered { background: rgba(156, 39, 176, 0.3); color: #ce93d8; }
        body.dark .status-submitted { background: rgba(255, 152, 0, 0.3); color: #ffb74d; }
        body.dark .status-won { background: rgba(76, 175, 80, 0.3); color: #81c784; }
        body.dark .status-rejected { background: rgba(158, 158, 158, 0.3); color: #bdbdbd; }
        .priority-low { background: #f5f5f5; color: #757575; }
        .priority-medium { background: #ffe0b2; color: #e65100; }
        .priority-high { background: #ffcdd2; color: #c62828; }
        body.dark .priority-low { background: rgba(117, 117, 117, 0.3); color: #bdbdbd; }
        body.dark .priority-medium { background: rgba(255, 152, 0, 0.3); color: #ffb74d; }
        body.dark .priority-high { background: rgba(244, 67, 54, 0.3); color: #ef5350; }
        .card-url {
            display: inline-flex; align-items: center; gap: 6px; color: #9c27b0;
            text-decoration: none; font-size: 0.9rem; margin-bottom: 15px; transition: color 0.2s;
        }
        .card-url:hover { color: #6a1b9a; }
        body.dark .card-url { color: #ce93d8; }
        .card-dates { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; font-size: 0.9rem; color: #666; }
        body.dark .card-dates { color: #aaa; }
        .date-item { display: flex; align-items: center; gap: 8px; }
        .card-actions { display: flex; gap: 8px; align-items: center; }
        .priority-controls { display: flex; flex-direction: column; gap: 4px; }
        .icon-btn {
            background: transparent; border: none; padding: 8px; border-radius: 12px;
            cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center;
        }
        .icon-btn:hover { background: #f3e5f5; }
        body.dark .icon-btn:hover { background: rgba(156, 39, 176, 0.2); }
        .icon-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .icon-btn.edit:hover { background: #e1bee7; }
        body.dark .icon-btn.edit:hover { background: rgba(156, 39, 176, 0.3); }
        .icon-btn.delete:hover { background: #ffcdd2; }
        body.dark .icon-btn.delete:hover { background: rgba(244, 67, 54, 0.3); }
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); z-index: 1000;
            align-items: center; justify-content: center; padding: 20px;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: white; border-radius: 30px; padding: 40px; max-width: 700px;
            width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        body.dark .modal-content { background: #2d2d44; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .modal-header h2 { font-size: 1.8rem; color: #333; }
        body.dark .modal-header h2 { color: #e0e0e0; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-size: 0.9rem; font-weight: 600; color: #555; margin-bottom: 8px; }
        body.dark .form-group label { color: #bbb; }
        .form-group input, .form-group select {
            width: 100%; padding: 14px 18px; border: 1px solid #ddd; border-radius: 20px;
            font-size: 0.95rem; outline: none; transition: all 0.2s; background: white; color: #333;
        }
        body.dark .form-group input, body.dark .form-group select { background: #1a1a2e; border-color: #444; color: #e0e0e0; }
        .form-group input:focus, .form-group select:focus { border-color: #9c27b0; box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1); }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .modal-actions { display: flex; gap: 12px; margin-top: 30px; }
        .btn-submit {
            flex: 1; padding: 14px 24px; background: linear-gradient(135deg, #9c27b0, #2196f3);
            color: white; border: none; border-radius: 20px; font-size: 1rem;
            font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
        }
        .btn-submit:hover { box-shadow: 0 6px 20px rgba(156, 39, 176, 0.4); }
        .btn-cancel {
            padding: 14px 24px; background: #e0e0e0; color: #333; border: none;
            border-radius: 20px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s;
        }
        body.dark .btn-cancel { background: #444; color: #e0e0e0; }
        .btn-cancel:hover { background: #d0d0d0; }
        body.dark .btn-cancel:hover { background: #555; }
        .icon { width: 18px; height: 18px; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; fill: none; }
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .controls { flex-direction: column; }
            .form-row { grid-template-columns: 1fr; }
            .modal-content { padding: 25px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Hackathon Manager</h1>
            <p>Track and manage your hackathon journey</p>
        </div>
        <div class="controls">
            <button class="btn-primary" onclick="openModal()">
                <svg class="icon" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                Add Hackathon
            </button>
            <div class="filter-group">
                <svg class="icon" viewBox="0 0 24 24"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
                <select id="filterStatus" onchange="renderHackathons()">
                    <option value="All">All Status</option>
                    <option value="Upcoming">Upcoming</option>
                    <option value="Registered">Registered</option>
                    <option value="Submitted">Submitted</option>
                    <option value="Won">Won</option>
                    <option value="Rejected">Rejected</option>
                </select>
            </div>
            <div class="sort-group">
                <span>Sort by:</span>
                <button class="sort-btn active" id="sortDate" onclick="setSortBy('date')">Date</button>
                <button class="sort-btn" id="sortManual" onclick="setSortBy('manual')">Manual</button>
            </div>
        </div>
        <div class="hackathons-grid" id="hackathonsGrid"></div>
    </div>
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Hackathon</h2>
                <button class="icon-btn" onclick="closeModal()">
                    <svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
            <div>
                <div class="form-group">
                    <label>Hackathon Name *</label>
                    <input type="text" id="hackName" placeholder="Enter hackathon name" required>
                </div>
                <div class="form-group">
                    <label>Official URL</label>
                    <input type="url" id="hackUrl" placeholder="https://example.com">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Start Date *</label>
                        <input type="date" id="hackStartDate" required>
                    </div>
                    <div class="form-group">
                        <label>End Date *</label>
                        <input type="date" id="hackEndDate" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Registration Deadline *</label>
                    <input type="date" id="hackDeadline" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Status *</label>
                        <select id="hackStatus">
                            <option value="Upcoming">Upcoming</option>
                            <option value="Registered">Registered</option>
                            <option value="Submitted">Submitted</option>
                            <option value="Won">Won</option>
                            <option value="Rejected">Rejected</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Priority Level *</label>
                        <select id="hackPriority">
                            <option value="Low">Low</option>
                            <option value="Medium" selected>Medium</option>
                            <option value="High">High</option>
                        </select>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn-submit" onclick="saveHackathon()">
                        <span id="submitBtnText">Add Hackathon</span>
                    </button>
                    <button class="btn-cancel" onclick="closeModal()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        const STORAGE_KEY = 'hackathons_data';
        let hackathons = [];
        let editingId = null;
        let currentSort = 'date';

        function init() {
            const stored = localStorage.getItem(STORAGE_KEY);
            if (stored) hackathons = JSON.parse(stored);
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark');
            }
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                e.matches ? document.body.classList.add('dark') : document.body.classList.remove('dark');
            });
            renderHackathons();
        }

        function saveToStorage() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(hackathons));
        }

        function openModal(hackathon = null) {
            const modal = document.getElementById('modal');
            if (hackathon) {
                document.getElementById('modalTitle').textContent = 'Edit Hackathon';
                document.getElementById('submitBtnText').textContent = 'Save Changes';
                editingId = hackathon.id;
                document.getElementById('hackName').value = hackathon.name;
                document.getElementById('hackUrl').value = hackathon.url;
                document.getElementById('hackStartDate').value = hackathon.startDate;
                document.getElementById('hackEndDate').value = hackathon.endDate;
                document.getElementById('hackDeadline').value = hackathon.registrationDeadline;
                document.getElementById('hackStatus').value = hackathon.status;
                document.getElementById('hackPriority').value = hackathon.priority;
            } else {
                document.getElementById('modalTitle').textContent = 'Add New Hackathon';
                document.getElementById('submitBtnText').textContent = 'Add Hackathon';
                editingId = null;
                document.getElementById('hackName').value = '';
                document.getElementById('hackUrl').value = '';
                document.getElementById('hackStartDate').value = '';
                document.getElementById('hackEndDate').value = '';
                document.getElementById('hackDeadline').value = '';
                document.getElementById('hackStatus').value = 'Upcoming';
                document.getElementById('hackPriority').value = 'Medium';
            }
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
            editingId = null;
        }

        function saveHackathon() {
            const name = document.getElementById('hackName').value.trim();
            const url = document.getElementById('hackUrl').value.trim();
            const startDate = document.getElementById('hackStartDate').value;
            const endDate = document.getElementById('hackEndDate').value;
            const registrationDeadline = document.getElementById('hackDeadline').value;
            const status = document.getElementById('hackStatus').value;
            const priority = document.getElementById('hackPriority').value;

            if (!name || !startDate || !endDate || !registrationDeadline) {
                alert('Please fill in all required fields');
                return;
            }

            const hackathon = { id: editingId || Date.now().toString(), name, url, startDate, endDate, registrationDeadline, status, priority };

            if (editingId) {
                const index = hackathons.findIndex(h => h.id === editingId);
                hackathons[index] = hackathon;
            } else {
                hackathons.push(hackathon);
            }

            saveToStorage();
            renderHackathons();
            closeModal();
        }

        function deleteHackathon(id) {
            if (confirm('Are you sure you want to delete this hackathon?')) {
                hackathons = hackathons.filter(h => h.id !== id);
                saveToStorage();
                renderHackathons();
            }
        }

        function movePriority(id, direction) {
            const index = hackathons.findIndex(h => h.id === id);
            if ((direction === 'up' && index === 0) || (direction === 'down' && index === hackathons.length - 1)) return;
            const targetIndex = direction === 'up' ? index - 1 : index + 1;
            [hackathons[index], hackathons[targetIndex]] = [hackathons[targetIndex], hackathons[index]];
            saveToStorage();
            renderHackathons();
        }

        function setSortBy(sort) {
            currentSort = sort;
            document.getElementById('sortDate').classList.toggle('active', sort === 'date');
            document.getElementById('sortManual').classList.toggle('active', sort === 'manual');
            renderHackathons();
        }

        function getFilteredAndSorted() {
            const filterStatus = document.getElementById('filterStatus').value;
            let filtered = filterStatus === 'All' ? [...hackathons] : hackathons.filter(h => h.status === filterStatus);
            if (currentSort === 'date') {
                filtered.sort((a, b) => new Date(a.startDate) - new Date(b.startDate));
            }
            return filtered;
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            return new Date(dateString).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
        }

        function renderHackathons() {
            const grid = document.getElementById('hackathonsGrid');
            const filtered = getFilteredAndSorted();

            if (filtered.length === 0) {
                grid.innerHTML = '<div class="empty-state"><p>No hackathons yet. Add your first one!</p></div>';
                return;
            }

            grid.innerHTML = filtered.map((hack, index) => `
                <div class="hackathon-card">
                    <div class="card-content">
                        <div class="card-main">
                            <div class="card-header">
                                <h3>${hack.name}</h3>
                                <span class="badge status-${hack.status.toLowerCase()}">${hack.status}</span>
                                <span class="badge priority-${hack.priority.toLowerCase()}">${hack.priority} Priority</span>
                            </div>
                            ${hack.url ? `<a href="${hack.url}" target="_blank" class="card-url">
                                <svg class="icon" viewBox="0 0 24 24"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                                Visit Website
                            </a>` : ''}
                            <div class="card-dates">
                                <div class="date-item">
                                    <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                                    <span>${formatDate(hack.startDate)} - ${formatDate(hack.endDate)}</span>
                                </div>
                                <div class="date-item">
                                    <span><strong>Deadline:</strong> ${formatDate(hack.registrationDeadline)}</span>
                                </div>
                            </div>
                        </div>
                        <div class="card-actions">
                            ${currentSort === 'manual' ? `<div class="priority-controls">
                                <button class="icon-btn" onclick="movePriority('${hack.id}', 'up')" ${index === 0 ? 'disabled' : ''}>
                                    <svg class="icon" viewBox="0 0 24 24"><polyline points="18 15 12 9 6 15"/></svg>
                                </button>
                                <button class="icon-btn" onclick="movePriority('${hack.id}', 'down')" ${index === filtered.length - 1 ? 'disabled' : ''}>
                                    <svg class="icon" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"/></svg>
                                </button>
                            </div>` : ''}
                            <button class="icon-btn edit" onclick='openModal(${JSON.stringify(hack).replace(/'/g, "&#39;")})'>
                                <svg class="icon" style="color: #9c27b0;" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                            </button>
                            <button class="icon-btn delete" onclick="deleteHackathon('${hack.id}')">
                                <svg class="icon" style="color: #f44336;" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        init();
    </script>
</body>
</html>